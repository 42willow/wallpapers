---
import type { ImageMetadata } from "astro";
import { Image } from "astro:assets";

interface Props {
  images: Record<string, () => Promise<{ default: ImageMetadata }>>;
  imagePath: string;
  name: string;
  flavour: string;
  author?: string;
}

const { images, imagePath, name, flavour, author } = Astro.props;
if (!images[imagePath])
  throw new Error(`"${imagePath}" does not exist in glob`);

const imageMetadata = await images[imagePath]();
---

<div class="card" class:list={flavour}>
  <h2 class="text-xl">{name.replaceAll("_", " ")}</h2>
  {
    author && (
      <p>
        <strong>author:</strong> {author}
      </p>
    )
  }
  <img
    src={imageMetadata.default.src}
    alt={author ? `${name} by ${author}` : name}
    width={800}
    class="rounded-lg"
  />
  <!-- <Image
    src={images[imagePath]()}
    alt={author ? `${name} by ${author}` : name}
    width={800}
    class="rounded-lg"
  /> -->
</div>
